---
layout: post
title: "[Python] sqlite"
date: "2018-10-01"
excerpt: "<ed>ŒŒ<ec>´<ec>¬<ec>—<ec>„œ ì¿¼ë¦¬ë¬¸ì„ <ec>‚¬<ec>š©<ed>•´ë³´ì"
output: github_document
tag:
    [python, sqlite]
comments: true
categories:
  Python
---




## sqlite

`sqlite`<eb>Š” ë³„ë„<ec>˜ db<ec>„œë²„ê<b0>€ <ed>•„<ec>š” <ec>—†<ec>´ db <ed>ŒŒ<ec>¼<ec>— ê¸°ì´ˆ<ed>•˜<ec>—¬ <eb>°<ec>´<ed>„°ë² ì´<ec>Š¤ë¥<bc> ì²˜ë¦¬<ed>•˜<eb>Š” <ec>—”ì§„ì´<eb>‹¤. ê¸°ë³¸<ec> <ec>¸ <ec>‚¬<ec>š©ë²•ì„ <ec>•Œ<ec>•„ë³´ì.


{% highlight python %}
import sqlite3
conn = sqlite3.connect(":memory:") # memory<U+653C><U+3E63>— dbë¥<U+623C><U+3E63> êµ¬ì„±<U+653C><U+3E64>•  <U+653C><U+3E63>ˆ˜ <U+653C><U+3E63>ˆ<U+653C><U+3E62>„ë¡<U+393C><U+3E64> 
c = conn.cursor() # pointer ì§€<U+653C><U+3E63> •
c.execute("create table emp(id integer, name text, sal integer)") # <U+653C><U+3E62>°<U+653C><U+3E63>´<U+653C><U+3E64>„°ë¥<U+623C><U+3E63> <U+653C><U+3E63>ãå<U+3E30>€<U+653C><U+3E63>¥<U+653C><U+3E64>•  <U+653C><U+3E63>ˆ˜ <U+653C><U+3E63>ˆ<U+653C><U+3E62>Š” <U+653C><U+3E64>…Œ<U+653C><U+3E63>´ë¸<U+393C><U+3E34> êµ¬ì„±
# data insert
c.execute("insert into emp(id, name, sal) values(1,'Jobs',1000)")
c.execute("select * from emp") 
# sqlite<U+653C><U+3E62>Š” ë©”ëª¨ë¦¬ì— <U+653C><U+3E62><U+383C><U+3E63>€<U+653C><U+3E64>•œ <U+653C><U+3E63> •ë³´ë§Œ ì¶œë ¥<U+653C><U+3E62>œ<U+653C><U+3E62>‹¤. ê·¸ë˜<U+653C><U+3E63>„œ fetchë¥<U+623C><U+3E63> <U+653C><U+3E64>•´ì£¼ì–´<U+653C><U+3E63>„œ <U+653C><U+3E64>™•<U+653C><U+3E63>¸<U+653C><U+3E64>•´<U+653C><U+3E63>•¼ <U+653C><U+3E64>•œ<U+653C><U+3E62>‹¤.
print(c.fetchone()) # 1ì¤<U+383C><U+3E34> <U+653C><U+3E64>Œ¨ì¹<U+393C><U+3E38>
{% endhighlight %}



{% highlight text %}
## (1, 'Jobs', 1000)
{% endhighlight %}



{% highlight python %}
c.execute("insert into emp(id, name, sal) values(2,'Bezos',2000)")
c.execute("select * from emp")
print(c.fetchone())
{% endhighlight %}



{% highlight text %}
## (1, 'Jobs', 1000)
{% endhighlight %}



{% highlight python %}
print(c.fetchone())
{% endhighlight %}



{% highlight text %}
## (2, 'Bezos', 2000)
{% endhighlight %}



{% highlight python %}
c.execute("select * from emp") 
print(c.fetchall()) # <U+653C><U+3E64>•œêº¼ë²ˆ<U+653C><U+3E63>— <U+653C><U+3E64>Œ¨ì¹<U+393C><U+3E38>
# cursor<U+653C><U+3E63><U+393C><U+3E39>€ connect <U+653C><U+3E62>‹«<U+653C><U+3E63>œ¼ë©<U+623C><U+3E34> data<U+653C><U+3E62>“¤<U+653C><U+3E63><U+393C><U+3E64>€ <U+653C><U+3E63>‚¬<U+653C><U+3E62>¼ì§€ê²<U+383C><U+3E63> <U+653C><U+3E62>œ<U+653C><U+3E62>‹¤.
{% endhighlight %}



{% highlight text %}
## [(1, 'Jobs', 1000), (2, 'Bezos', 2000)]
{% endhighlight %}



{% highlight python %}
c.close() 
conn.close()
# data<U+653C><U+3E62>“¤<U+653C><U+3E63>´ <U+653C><U+3E63>‚¬<U+653C><U+3E62>¼ì§€<U+653C><U+3E62>Š”ì§€ <U+653C><U+3E64>™•<U+653C><U+3E63>¸<U+653C><U+3E64>•´ë³´ì
conn= sqlite3.connect(":memory:")
c = conn.cursor()
c.execute("select * from emp") 
{% endhighlight %}



{% highlight text %}
## OperationalError: no such table: emp
{% endhighlight %}



{% highlight python %}
print(c.fetchall())
# <U+653C><U+3E64>™•<U+653C><U+3E63>¸ì°ãå<U+3E38> <U+653C><U+3E63>—´<U+653C><U+3E63>–´ <U+653C><U+3E62>‘” cursor<U+653C><U+3E63><U+393C><U+3E39>€ connectë¥<U+623C><U+3E63> <U+653C><U+3E62>‹«<U+653C><U+3E63>•„ì£¼ì
{% endhighlight %}



{% highlight text %}
## []
{% endhighlight %}



{% highlight python %}
c.close() 
conn.close()
{% endhighlight %}

`insert`<eb>Š” transaction<ec>´ ë°œìƒ<ed>•œ<eb>‹¤. ê·¸ë˜<ec>„œ `rollback`ê³<bc> `commit`<ec>„ <ec>„ <ec>–¸<ed>•  <ec>ˆ˜ <ec>ˆ<eb>‹¤.


{% highlight python %}
import sqlite3
conn = sqlite3.connect(":memory:") 
c = conn.cursor()
c.execute("create table emp(id integer, name text, sal integer)")
c.execute("insert into emp(id, name, sal) values(1,'Jobs',1000)")
c.execute("insert into emp(id, name, sal) values(2,'Bezos',2000)")
c.execute("select * from emp")
print(c.fetchall())
# rollback <U+653C><U+3E63>„ <U+653C><U+3E63>–¸
{% endhighlight %}



{% highlight text %}
## [(1, 'Jobs', 1000), (2, 'Bezos', 2000)]
{% endhighlight %}



{% highlight python %}
conn.rollback() 
c.execute("select * from emp") 
print(c.fetchall())
{% endhighlight %}



{% highlight text %}
## []
{% endhighlight %}



{% highlight python %}
c.execute("insert into emp(id, name, sal) values(1,'Jobs',1000)")
c.execute("insert into emp(id, name, sal) values(2,'Bezos',2000)")
# commit <U+653C><U+3E63>„ <U+653C><U+3E63>–¸
conn.commit()
c.execute("select * from emp") 
print(c.fetchall())
{% endhighlight %}



{% highlight text %}
## [(1, 'Jobs', 1000), (2, 'Bezos', 2000)]
{% endhighlight %}



{% highlight python %}
c.close() 
conn.close()
{% endhighlight %}


