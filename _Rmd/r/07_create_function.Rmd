---
layout: post
title: "[R] 함수 생성"
date: "2018-08-01"
excerpt: "이제 직접 함수를 만들어 보자"
output: 
  html_document:
    toc: true
    toc_depth: 3
comments: true
categories: R
tag: [R, function]
---

## 함수

-사용자가 정의하는 함수를 생성할 수 있다.
-자주 반복되어 사용하는 기능을 정의하는 프로그램
-코드가 간단해진다.
-DB가 아니기때문에 사용시마다 만들어주어야 한다.
-다음과 같이 함수를 선언한다.

```
함수이름 <- function(){
              수행해야 할 코드
              return(변환값) # Optional
}
```
***

### 함수의 생성

간단한 함수를 만들어 보자

```{r}
date1 <- function(){
  
  return(Sys.Date())

}

date1()
```

<br>

```{r}
time <- function(){
  
  Sys.time()
  
}

time()
```

<br>

```{r}
hap <- function(x,y){ # Parameter 2개 선언
  
  res <- x+y # Local variable 선언
  return(res)
  
}

hap(1,2)
```


***
  
### 가변 인수의 함수

아래 예시를 살펴보자. 가변 인수는 `...`으로 표현하여 함수를 만들면 된다.

```{r}
f <- function(...){
  x <- list(...) # Vector로 선언하여도 상관 없음
  for(i in x){
    print(i)
  }
}

f(1,2)
f(1,2,3)
f('a','b','c','d')

```

***

### 중첩 함수

함수안에 함수를 만들어서 사용할 수 있다.

```{r}
f <- function(x,y){
  print(x)
  f2 <- function(y){
    y <- x*y
    print(y)
  }
  f2(y)
}

f(10,20)
```

***

### 변수에 따른 할당연산자 사용


`전역변수(Global Variable)`: 함수에 상관없이 프로그램 전체에서 사용할 수 있는 변수

`지역변수(Local Variable)`: 함수내에서 정의되고 사용하는 변수

`매개변수(Parameter Variable`: 함수의 인수에서 받아서 사용하는 변수

<br>

아래 코드를 보고 지역변수와 전역변수를 구분하고 할당연산자를 사용시 주의를 하자.

```{r}
x<-1; y<-2; z<-3;

f <- function(x){
  y <- x*10 # Local variable
  print(x); print(y); print(z)
}

f(x)
x; y; z
```

```{r}
x<-1; y<-2; z<-3;

f <- function(x){
  y = x*10 # Local variable
  print(x); print(y); print(z)
}

f(x)

x; y; z
```

할당연산자 `<-`와 `=`는 지역변수에 할당을 해주어서 사용한다. 하지만 `<<-`를 사용하면 전역변수에 할당됨을 주의하자.

```{r}
x<-1; y<-2; z<-3;

f <- function(x){
  y <<- x*10 # Global variable y에 영향을 줌
  print(x); print(y); print(z)
}

f(x)

x; y; z
```

<br>

#### 참고

다른 프로그램과 달리 R은 지역변수와 전역변수가 선언될 때 차이가 있다.

```{r warning=TRUE}
sum(x <- c(1,2,3,4,5))
x

sum(x <- c(1,2,3,4,5))
y
```

`<-`는 지역변수 할당자이지만 `<<-`와 같이 변수를 생성해준다. 반면 `=`는 그렇지 않다.

```{r warning=TRUE}
sum(x <- c(1,2,3,4,5))
z
```

에러가 발생한다. `<-`보다 `=`가 더 명확한 지역변수 할당자라는 점을 기억해두자.