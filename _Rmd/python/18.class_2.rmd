---
layout: post
title: "[Python] class part-2: class 구조의 이해"
date: "2018-10-08"
excerpt: "객체 지향 언어의 특징"
output: github_document
tag:
    [python, class, procedural, POLs, OOLs]
comments: true
categories:
  Python
---

<!-- MacOS -->
<!-- # ```{r setup, include = FALSE} -->
<!-- # library(reticulate) -->
<!-- # use_python("/Users/Deokhee/anaconda/bin/") -->
<!-- # ``` -->



## class

2단어를 조합해서 클래스를 만들 때는 보통 낙타모양처럼 앞글자는 소문자, 뒷글자의 첫 알파벳을 대문자로 설정한다. 다음 코드를 보고 클래스를 이해해보자.

```{python}
class myClass:
    pass # 함수. 클래스에서 아무 작업하지 않을 때 사용
    
class Person:
    name = 'James' # global 변수처럼 사용됌
    age = 20
    
    def myName(self): # self 자기자신의 클래스를 의미. java나 c에서는 this로 사용
        print('name: {}'.format(self.name))
    def myAge(self):
        print('age: {}'.format(self.age))


p1 = Person() # 실제로 사용하려면 인스턴스화를 해야한다.
p1.myName()
p1.myAge()

p2 = Person()
p2.name = 'Wilson' # 이름을 수정할 수 있다.
p2.age = '25'
p2.myName()
p2.myAge()

p2.job = 'Programmer'  # 없는 속성도 추가할 수 있다.
print('job:',p2.job)
```

`class`를 사용할 때는 `instance`를 사용해야 함을 잊지 말자.

***

### init 생성자

`__init__` 생성자는 class에서 반드시 실행되고 초기화로 사용된다.

```{python}
class Person:
    def __init__(self): 
        # __init__ 생성자는 class를 사용할 때 반드시 실행된다
        # 이 생성자에서 self를 사용하지 않으면 syntax error 발생
        self.info = ""
        # 'info' 라는 변수를 만들고 초기화시킴 (global 변수가 아니라 local 변수 처럼 사용된다)
        
    def showinfo(self,name,age):
        self.info += "Name: "+name+", "+"Age: "+str(age)+"\n"


football = Person() # 인스턴스 생성. init 생성자가 만들어 진다.
football.showinfo("Henry",28)
football.showinfo("Kante",25)
print(football.info)

basketball = Person()
basketball.showinfo("Jordan",30)
basketball.showinfo("Curry",28)
print(basketball.info)
```

***

### self의 의미

self를 사용하고 안하고의 차이를 알아보자

```{python}
name = "Zuckerberg"

class myName:
    def mySet(self,setname):
        self.name = setname
    def myPrint(self):
        print(name) # 클래스 바깥의 변수(Zuckerberg) 호출 
        print(self.name) # 클래스내의 변수 호출

p1 = myName()
p1.mySet("Jobs")
p1.myPrint()
```

***

### 클래스내의 변수 공유

같은 클래스를 사용할 때 공통적으로 변수를 사용할 수 있다. 이는 예를 들어 해당 `class`를 몇 번 사용했는지를 알 수 있다. `PL/SQL`에서 `spec`에다가 카운트 변수를 선언을 하고 호출때마다 체크하는 개념으로 생각하면 된다.

```{python}
class Employee:
    empCount = 0 # 메소드 위에 변수 선언
    def __init__(self,name,salary):
        self.name = name # 클래스내의 변수 명은 보통 할당받는 변수이름과 같이 써준다.
        self.salary = salary
        Employee.empCount += 1 # 클래스를 사용할 때마다 공통 메모리를 선언하여 사용되는 변수
        
        # '클래스 이름.변수 이름' 으로 사용
        # class를 실행시키면 init이 실행된다. 
        # 그래서 empCount는 이 프로그램을 사용할 때 공통적으로 사용하는 global 변수로 사용된다.
        # empCount는 초기화 되지 않는다.
        
    def displayCount(self): # 호출만 하는 메소드에서도 self를 사용
        print('Number of emp: %d'%Employee.empCount)
        
    def displayEmployee(self):
        print('name: ',self.name,', Salary: ',self.salary)

emp1 = Employee('Kim',1000) # 메소드에 값을 넣지않고 인스턴스를 만들 때 값을 할당할 수 있다.
emp1.displayCount()
emp1.displayEmployee()

emp2 = Employee('Lee',2000)
emp2.displayCount() # instance는 다른데 값이 누적되었다.
emp2.displayEmployee()
```

`empCount`를 `self`로 사용한다면 `__init__`에서 초기화가 된다. 

```{python}
class Employee:
    empCount = 0
    def __init__(self,name,salary):
        self.name = name
        self.salary = salary
        self.empCount += 1 

    def displayCount(self):
        print('Number of emp: %d'%self.empCount)
    def displayEmployee(self):
        print('name: ',self.name,', Salary: ',self.salary)


emp1 = Employee('Kim',1000) 
emp1.displayCount()
emp1.displayEmployee()

emp2 = Employee('Lee',2000)
emp2.displayCount() 
emp2.displayEmployee()
```

`self`를 사용하면 자기자신의 인스턴스에 사용되는 변수로만 사용된다.

***

### class와 instance 주소 확인

```{python}
class Employee:
    pass

emp1 = Employee() # 인스턴스화
emp2 = Employee()

print('emp1의 메모리 주소 :',id(emp1),'\n'+'emp2의 메모리 주소 :',id(emp2)) 
# 메모리 주소가 서로 다름을 확인할 수 있다.


print('emp1 인스턴스의 클래스 :',emp1.__class__,'\n'+
      'emp2 인스턴스의 클래스 :',emp2.__class__) 
# 해당 인스턴스가 같은 클래스에 있다는 것을 알 수 있다.

print('emp1 클래스의 메모리 정보 :',id(emp1.__class__),'\n'+
      'emp2 클래스의 메모리 정보 :',id(emp2.__class__),'\n'+
      'Employee 클래스의 메모리 정보 :',id(Employee)) 
# 같은 Employee 클래스를 보고 있기에 같은 값이 출력된다.
```

***

### class 변수와 instance 변수

클래스 변수와 인스턴스 변수의 차이를 알아보자.

```{python, error = TRUE}
class Employee:
    pass

Employee.name = 'Kim'
print('emp1.name :',emp1.name,'\n'+
      'emp2.name :',emp2.name)
```
 
 'Kim'이라는 값을 클래스 변수(Employee.name)로 설정하였기에 같은 값이 나온다.
 그럼 emp1 인스턴스에 변수를 할당해보자.
 
```{python, error = TRUE}
emp1.name = 'Park'
print('emp1.name :',emp1.name,'\n'+
      'emp2.name :',emp2.name)
# 자기 인스턴스에 변수가 없어서 클래스 변수를 사용한다.

emp1.salary = 2000
print(emp1.salary) # emp1의 인스턴스변수로 지정했다.
print(emp2.salary) # emp2 인스턴스에는 salary가 없기 때문에 error 발생
```
